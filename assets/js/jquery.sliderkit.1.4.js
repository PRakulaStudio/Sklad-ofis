(function(jQuery){var SliderKit=function(){var self=this;this._init=function(element,options){this.options=$.extend({},this._settings,options);this.domObj=$(element);this.panels=$("."+this.options.cssprefix+"-panel",this.domObj);this.nav=$("."+this.options.cssprefix+"-nav",this.domObj);this.navClip=$("."+this.options.cssprefix+"-nav-clip",this.nav);this.allItems=this.panels.size();this.arePanels=this.allItems>0?1:0;this.isNavClip=this.navClip.size()>0?1:0;if(!this.arePanels&&!this.isNavClip){this._errorReport("01",this.options.debug,1);}else if(this.domObj.css("height")=="auto"&&!this.options.freeheight){this._errorReport("02",this.options.debug,1);}this.domObj.css("display","block");this.currId=0;this.newId=0;this.prevId=0;this.currPanel=null;this.firstTime=1;this.scrollit=0;this.isPlaying=null;this.changeOngoing=false;this.cssClassNames={cssSelected:this.options.cssprefix+"-selected",cssActive:this.options.cssprefix+"-panel-active",cssOld:this.options.cssprefix+"-panel-old",cssBtnDisable:this.options.cssprefix+"-btn-disable",cssPanelsWrapper:this.options.cssprefix+"-panels-wrapper",cssBtnPause:this.options.cssprefix+"-pause-btn",cssPosValue:"+"};if(this.isNavClip){this._buildNav();}this._buildControls();if(this.arePanels){this.panelsBag=$("."+this.options.cssprefix+"-panels",this.domObj);if(this.options.panelfx=="sliding"){this._wrapPanels();}}this.lineScrollDo=!this.arePanels?1:0;if(this.options.mousewheel){this.domObj.mousewheel(function(event,delta){delta>0?self.change(null,"+=",null,self.lineScrollDo,1):self.change(null,"-=",null,self.lineScrollDo,1);return false;});}if(this.options.keyboard){this.domObj.keyup(function(event){if(event.keyCode==37){self.stepBackward();}else if(event.keyCode==39){self.stepForward();}});}if(this.options.panelclick&&this.arePanels){this.panelsBag.click(function(){self.stepForward();return false;});}this.change(null,"",this.options.start,0,null);if(this.options.auto){this.autoScrollStart();if(!this.isPlayBtn){this.domObj.hover(function(){if(self.isPlaying!=null){self.autoScrollStop();}},function(){self.autoScrollStart();});}}return this;};this._errorReport=function(errorCode,debug,stop){if(debug){alert("Slider Kit error! Code #"+errorCode+" (see doc)");}if(stop){return false;}};this._buildNav=function(){this.navUL=$("ul",this.navClip);var navLI=$("li",this.navUL);var navLINum=navLI.size();if(this.arePanels&&(navLINum!=this.allItems)&&this.nav.size()==1){this._errorReport("03",this.options.debug,1);}if(this.options.tabs){this.options.shownavitems=this.allItems;}else{function getLImargin(attr){attrVal=navLI.css(attr);if(attrVal!="auto"&&attr!=""&&attr!="0px"){return parseInt(attrVal);}else return 0;}var navSize=this.options.verticalnav?this.nav.height():this.nav.width();var navLIWidth=navLI.outerWidth(true);var navLIHeight=navLI.outerHeight(true);var navLIextHMarg=getLImargin("margin-left")+getLImargin("margin-right");var navLIextVMarg=getLImargin("margin-top")+getLImargin("margin-bottom");this.navLIsize=this.options.verticalnav?navLIHeight:navLIWidth;this.navULSize=this.navLIsize*navLINum;this.navClipSize=(this.options.shownavitems*this.navLIsize)-(this.options.verticalnav?navLIextVMarg:navLIextHMarg);this.cssPosAttr=this.options.verticalnav?"top":"left";var cssSizeAttr=this.options.verticalnav?"height":"width";var cssSizeAttrr=this.options.verticalnav?"width":"height";navLI.css({width:navLI.width(),height:navLI.height()});this.navUL.css(cssSizeAttr,this.navULSize+"px");this.navClip.css({width:this.options.verticalnav?navLIWidth:this.navClipSize,height:this.options.verticalnav?this.navClipSize:navLIHeight});if(this.options.navclipcenter){this.navClip.css(this.cssPosAttr,(navSize-this.navClipSize)/2).css("margin","0");}this.allItems=navLINum;if(this.allItems>this.options.shownavitems){this.scrollit=true;if(this.options.scroll==null||this.options.scroll<0||this.options.scroll>this.allItems){this.options.scroll=this.options.shownavitems;}this.navBtns=$("."+this.options.cssprefix+"-nav-btn",this.nav);if(this.navBtns.size()>0){this._buildNavButtons();}}}if(this.arePanels){if(this.options.navitemshover){navLI.mouseover(function(){self.changeWithId(getIndex(this,"li"));});}else{navLI.click(function(){self.changeWithId(getIndex(this,"li"));return false;});}function getIndex(item,tag){return $(tag,jQuery(item).parent()).index(item);}}};this._buildNavButtons=function(msg){this.scrollBtns=true;this.navBtnPrev=$("."+this.options.cssprefix+"-nav-prev",this.nav);this.navBtnNext=$("."+this.options.cssprefix+"-nav-next",this.nav);this.navBtnPrev.click(function(){self.navPrev();return false;});this.navBtnNext.click(function(){self.navNext();return false;});if(this.options.navcontinuous){this.navBtnPrev.mouseover(function(){self.navPrev(true);});this.navBtnNext.mouseover(function(){self.navNext(true);});this.navBtns.mouseout(function(){self.navStopContinuous();});}if(!this.options.circular){this.navBtnPrev.toggleClass(this.cssClassNames.cssBtnDisable);}};this._getNavPos=function(){this.navPos=this.options.verticalnav?this.navUL.position().top:this.navUL.position().left;this.LIbefore=Math.ceil(Math.abs(this.navPos)/this.navLIsize);this.LIafter=Math.floor((this.navULSize-Math.abs(this.navPos)-this.navClipSize)/this.navLIsize);if(this.LIafter<0){this.LIafter=0;}};this._buildControls=function(){this.playBtn=$("."+this.options.cssprefix+"-play-btn",this.domObj);this.gBtns=$("."+this.options.cssprefix+"-go-btn",this.domObj);this.isPlayBtn=this.playBtn.size()>0?1:0;this.goBtns=this.gBtns.size()>0?1:0;if(this.isPlayBtn){if(this.options.auto){this.playBtn.addClass(this.cssClassNames.cssBtnPause);}this.playBtn.click(function(){if(self.playBtn.hasClass(self.cssClassNames.cssBtnPause)){self.playBtnPause();}else{self.playBtnStart();}return false;});}if(this.goBtns){this.goBtnPrev=$("."+this.options.cssprefix+"-go-prev",this.domObj);this.goBtnNext=$("."+this.options.cssprefix+"-go-next",this.domObj);if(this.options.panelbtnshover){this.gBtns.hide();$("."+this.options.cssprefix+"-panels",this.domObj).hover(function(){self.gBtns.fadeIn();},function(){self.gBtns.fadeOut();});}this.goBtnPrev.click(function(){self.goPrev();return false;});this.goBtnNext.click(function(){self.goNext();return false;});}};this._wrapPanels=function(){this.panels.wrapAll('<div class="'+this.cssClassNames.cssPanelsWrapper+'"></div>');this.panelsWrapper=$("."+this.cssClassNames.cssPanelsWrapper,this.panelsBag);this.panelsWrapper.css({"position":"relative"});};this.playBtnPause=function(){this.playBtn.removeClass(this.cssClassNames.cssBtnPause);this.autoScrollStop();};this.playBtnStart=function(){this.playBtn.addClass(self.cssClassNames.cssBtnPause);this.autoScrollStart();};this.changeWithId=function(id){this.change(null,"",id,0,1);};this.stepBackward=function(){this.change(null,"+=",null,0,1);};this.stepForward=function(){this.change(null,"-=",null,0,1);};this.navPrev=function(c){if(c){self.scrollcontinue="-=";}this.change(this.navBtnPrev,"+=",null,1,1);};this.navNext=function(c){if(c){self.scrollcontinue="+=";}this.change(this.navBtnNext,"-=",null,1,1);};this.navStopContinuous=function(){self.scrollcontinue="";};this.goPrev=function(){this.change(this.goBtnPrev,"+=",null,0,1);};this.goNext=function(){this.change(this.goBtnNext,"-=",null,0,1);};this.change=function(btn,scrollWay,forcedId,lineScroll,stopAuto){if(stopAuto&&this.isPlaying!=null&&this.isPlayBtn){this.playBtnPause();}if(btn!=null){if(btn.hasClass(this.cssClassNames.cssBtnDisable)){return false;}}var stopGoing=0;var running=$(":animated",this.options.fastchange?this.nav:this.domObj).size()>0?1:0;if(!running){if(forcedId==null&&!lineScroll){this.currId=scrollWay=="-="?this.currId+1:this.currId-1;}else if(forcedId!=null){this.currId=forcedId;}if(this.goBtns){this.gBtns.removeClass(this.cssClassNames.cssBtnDisable);}if(!this.options.circular){if(this.currId==-1){this.currId=0;stopGoing=1;}if(this.currId==0&&this.goBtns){this.goBtnPrev.addClass(this.cssClassNames.cssBtnDisable);}if(this.currId==this.allItems){this.currId=this.allItems-1;stopGoing=1;}if(this.currId==this.allItems-1){if(this.options.auto){this.autoScrollStop();}if(this.goBtns){this.goBtnNext.addClass(this.cssClassNames.cssBtnDisable);}}}else if(!this.scrollit){if(this.currId==this.allItems){this.currId=0;}if(this.currId==-1){this.currId=this.allItems-1;}}if(forcedId==null&&this.scrollit&&!stopGoing){this._setNavScroll(lineScroll,scrollWay);}if(this.isNavClip){this.selectThumbnail(this.currId);}if(this.arePanels){this.animPanel(this.currId,scrollWay);}}};this.selectThumbnail=function(currId){$("ul li."+this.cssClassNames.cssSelected,this.nav).removeClass(this.cssClassNames.cssSelected);$("ul li:eq("+currId+")",this.nav).addClass(this.cssClassNames.cssSelected);};this._setNavScroll=function(lineScroll,scrollWay){this._getNavPos();if(!lineScroll){var idFromClipStart=Math.abs(this.currId+1-this.LIbefore);var idToClipEnd=this.allItems-this.LIafter-this.currId;}if(lineScroll||idToClipEnd==0||idFromClipStart==0){var LIleft=scrollWay=="-="?this.LIafter:this.LIbefore;var scrollto=LIleft<this.options.scroll?LIleft:this.options.scroll;var scrollSize=scrollto*this.navLIsize;this.newId=scrollWay=="-="?this.LIbefore+scrollto:this.LIbefore-scrollto+this.options.shownavitems-1;if((scrollWay=="-="&&this.newId>this.currId)||(scrollWay=="+="&&this.newId<this.currId)){this.currId=this.newId;}if(this.options.circular){if(this.LIbefore<=0&&scrollWay=="+="){scrollWay="-=";this.currId=this.allItems-1;scrollSize=(this.LIafter/this.options.scroll)*(this.navLIsize*this.options.scroll);}else if(this.LIafter==0&&scrollWay=="-="){scrollWay="+=";this.currId=0;scrollSize=Math.abs(this.navPos);}}this.animNav(scrollWay,scrollSize);}};this.animPanel=function(currId,scrollWay){this.currPanel=this.panels.eq(currId);if(!this.currPanel.hasClass(this.cssClassNames.cssActive)){if(this.firstTime){this.panelTransition="none";this.firstTime=0;var FirstTime=1;}else{this.panelTransition=this.options.freeheight?"none":this.options.panelfx;}if(self.options.panelfxbefore)self.options.panelfxbefore();this._panelTransitions[this.panelTransition](scrollWay,FirstTime);}};this.animNav=function(scrollWay,scrollSize){var navComplete=function(){if(!self.options.circular&&self.scrollBtns){self.navBtns.removeClass(self.cssClassNames.cssBtnDisable);self._getNavPos();if(self.LIbefore<=0){self.navBtnPrev.addClass(self.cssClassNames.cssBtnDisable);}else if(self.LIafter<=0){self.navBtnNext.addClass(self.cssClassNames.cssBtnDisable);}}if(self.scrollcontinue){setTimeout(function(){self.scrollcontinue=="-="?self.navPrev():self.navNext()},0);}};this.navTransition=this.options.navfx;this._navTransitions[this.navTransition](scrollWay,scrollSize,navComplete);};this.autoScrollStart=function(){var self=this;this.isPlaying=setInterval(function(){self.change(null,"-=",null,self.lineScrollDo,null);},self.options.autospeed);};this.autoScrollStop=function(){clearTimeout(this.isPlaying);this.isPlaying=null;};this._panelTransitions={none:function(scrollWay,FirstTime){self.panels.removeClass(self.cssClassNames.cssActive).hide();if(self.options.freeheight&&self.options.panelfx=="fading"){self.currPanel.fadeIn(self.options.panelfxspeed);}else{self.currPanel.addClass(self.cssClassNames.cssActive).show();}if(self.options.panelfxafter)self.options.panelfxafter();},sliding:function(scrollWay,FirstTime){if(scrollWay==""){scrollWay=self.prevId<self.currId?"-=":"+=";}self.prevId=self.currId;var cssPosValue=scrollWay=="-="?"+":"-";var cssSlidePosAttr=self.options.verticalslide?"top":"left";var domObjSize=self.options.verticalnav?self.domObj.height():self.domObj.width();var slideScrollValue=cssSlidePosAttr=="top"?{top:scrollWay+domObjSize}:{left:scrollWay+domObjSize};self.oldPanel=$("."+self.cssClassNames.cssOld,self.domObj);self.activePanel=$("."+self.cssClassNames.cssActive,self.domObj);self.panels.css(cssSlidePosAttr,"0");self.oldPanel.removeClass(self.cssClassNames.cssOld).hide();self.activePanel.removeClass(self.cssClassNames.cssActive).addClass(self.cssClassNames.cssOld);self.currPanel.addClass(self.cssClassNames.cssActive).css(cssSlidePosAttr,cssPosValue+domObjSize+"px").show();self.panelsWrapper.stop(true,true).css(cssSlidePosAttr,"0").animate(slideScrollValue,self.options.panelfxspeed,self.options.panelfxeasing,function(){if(self.options.panelfxafter)self.options.panelfxafter();});},fading:function(scrollWay,FirstTime){if(FirstTime){self.panels.hide();}else self.currPanel.css("display","none");$("."+self.cssClassNames.cssOld,self.domObj).removeClass(self.cssClassNames.cssOld);$("."+self.cssClassNames.cssActive,self.domObj).stop(true,true).removeClass(self.cssClassNames.cssActive).addClass(self.cssClassNames.cssOld);self.currPanel.addClass(self.cssClassNames.cssActive).animate({"opacity":"show"},self.options.panelfxspeed,self.options.panelfxeasing,function(){if(self.options.panelfxafter){self.options.panelfxafter();}});}};this._navTransitions={none:function(scrollWay,scrollSize,navComplete){var newScrollSize=scrollWay=="-="?self.navPos-scrollSize:self.navPos+scrollSize;self.navUL.css(self.cssPosAttr,newScrollSize+"px");navComplete();},sliding:function(scrollWay,scrollSize,navComplete){self.navUL.animate(self.cssPosAttr=="left"?{left:scrollWay+scrollSize}:{top:scrollWay+scrollSize},self.options.scrollspeed,self.options.scrolleasing,function(){navComplete();});}};this._settings={cssprefix:"sliderkit",start:0,auto:true,autospeed:4000,mousewheel:false,keyboard:false,panelclick:false,circular:false,shownavitems:5,navitemshover:false,navclipcenter:false,navcontinuous:false,navfx:"sliding",scroll:null,scrollspeed:600,scrolleasing:null,panelfx:"fading",panelfxspeed:700,panelfxeasing:null,panelfxbefore:function(){},panelfxafter:function(){},panelbtnshover:false,verticalnav:false,verticalslide:false,tabs:false,freeheight:false,fastchange:true,debug:false};this.addTransition=function(name,fn){_transitions[name]=fn;};};jQuery.fn.sliderkit=function(options){if(this.length){return this.each(function(){var mySliderkit=new SliderKit();mySliderkit._init(this,options);$.data(this,"sliderkit",mySliderkit);});}};})(jQuery);